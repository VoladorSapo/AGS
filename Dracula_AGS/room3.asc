// room script file

function room_FirstLoad()
{
SetBackgroundFrame(Noche);
}


function room_RepExec()
{
//Si desde el codigo global se ordena cambiar de fondo
if(NocheEnRoom){
  if(Noche==0){
  SetFadeColor(80, 40, 1);
  FadeOut(10);
  
  Noche=1;
  
  //Cambio de View
  cJonathan.ChangeView(1);
  
  SetBackgroundFrame(Noche);
  
  Wait(10);
  SetFadeColor (75, 45, 0);
  FadeIn(10);
  NocheEnRoom=false;
  }else if(Noche==1){
  SetFadeColor (75, 45, 0);
  FadeOut(10);
  
  Noche=0;
  
  //Cambio de View
  cJonathan.ChangeView(1);
  
  SetBackgroundFrame(Noche);
  
  Wait(10);
  SetFadeColor(80, 40, 1);
  FadeIn(10);
  NocheEnRoom=false;
  }

}

//Detecta si se obtuvo el agua bendita y revela la habitacion
if(cJonathan.HasInventory(iAguaBendita1)){
  ObtuvoAguaBendita=true;
}
if(ObtuvoAguaBendita){
  while(Tapa1.Transparency<100){
    Tapa1.Transparency++;
    Wait(3);
  }
  Tapa1.Visible=false;
}else{Tapa1.Transparency=0;}

}

function room_Load()
{
SetBackgroundFrame(Noche);
  
}

function region1_WalksOnto()
{
cMarishka.Transparency=100;
cAleera.Transparency=100;
cConde.ChangeRoom(3, 95,  885, eDirectionRight);
cConde.x = 120;
cConde.y = 940;
cConde.Transparency=100;
}

function hPuertaCastillo_Look()
{
if(Room3Piso==1){
cJonathan.Walk(1980, 1500, eBlock);
if(PuertaCerradaRoom3){
  cJonathan.Think("¿¡Qué rayos!? ¡La puerta ya no se abre!...\nTendré que buscar otra salida");
}else{}
}
}

function room_AfterFadeIn()
{
  cCavi.Animate(2, 3, eRepeat, eNoBlock);
//Sonido para enfatizar que la puerta esta ahora bloqueada

ShakeScreen(2);

cJonathan.Think("Le falta el sonido de la puerta al cerrar");
}

function hHabitacionMeretrices_Look()
{
  if(Room3Piso==2){
if(!HechoPuzzleRoom3){
  cJonathan.Walk(790,  970,  eBlock);
  cJonathan.Think("Oigo un murmullo…");
  cJonathan.Think("…");
  cJonathan.Think("*¡JO…NA…THAN!¡JO…NATHAN!¡VEN…AQUÍ…JOHNATAN!*");
  
  cJonathan.Think("Mejor no entro ahí por el momento");
}
else{
  cJonathan.Walk(790,  970,  eBlock);
  FadeOut(3);
  cJonathan.x=600;
  cJonathan.y=980;
  FadeIn(3);
  cMMMverona.Say("(Se ríen sensualmente) Ja, ja, Joonathan...");
  cMarishka.Say("Sabemos que es lo que deseas.");
  cAleera.Say("No te puedes controlar, eres un hombre...");
  cMMMverona.Say("Besadme hermanas, que vea este joven apuesto y fuerte como las mujeres también nos podemos amar.");
  cAleera.Say("parece que eso le excita, adelante ve tu primero y nosotras te seguimos. Hay besos para todas.");
  cMarishka.Say("Cierra los ojos macho, disfruta de tu instinto animal.");
  cJonathan.Think("Mina, mi corazón se inflamó con un deseo malvado y ardiente.");
  cJonathan.Think("Deseaba que me besaran con aquellos labios rojos.");
  cJonathan.Think("Pero pensé en tí, en tu mirada y tu sonrisa y me dí cuenta de mi situación, estaba preso y ahora era el alimento de aquellos monstruos, debo defenderme.");
  
  }
}
}

function hCuadroHeisenberg_Look()
{
  if(Room3Piso==2){
  cJonathan.Walk(1500,  960,  eBlock);
  cJonathan.Think("Esta persona me resulta familiar...");
  cJonathan.AddInventory(iAguaBendita1);
  cJonathan.AddInventory(iRosario);
  HechoPuzzleRoom3=true;
//Poner sonido breaking bad de fondo
}
}

function region3_WalksOnto()
{
SetFadeColor(0, 0, 0);
FadeOut(3);

cJonathan.x=1660;
cJonathan.y=900;

FadeIn(3);
cJonathan.Walk(1640, 960, eBlock);
Room3Piso=2;
}

function region2_WalksOnto()
{
SetFadeColor(0, 0, 0);
FadeOut(3);
cJonathan.x=1325;
cJonathan.y=900;

FadeIn(3);
cJonathan.Walk(1345, 960, eBlock);
Room3Piso=2;
}

function region7_WalksOnto()
{
SetFadeColor(0, 0, 0);
FadeOut(3);
cJonathan.x=1835;
cJonathan.y=1425;

FadeIn(3);
cJonathan.Walk(1860, 1480, eBlock);
Room3Piso=1;
}

function region6_WalksOnto()
{
SetFadeColor(0, 0, 0);
FadeOut(3);
cJonathan.x=1115;
cJonathan.y=1425;

FadeIn(3);
cJonathan.Walk(1090, 1480, eBlock);
Room3Piso=1;
}

function region4_WalksOnto()
{
SetFadeColor(0, 0, 0);
FadeOut(3);
cJonathan.x=1310;
cJonathan.y=390;

FadeIn(3);
cJonathan.Walk(1330, 450, eBlock);
Room3Piso=3;
}

function region5_WalksOnto()
{
SetFadeColor(0, 0, 0);
FadeOut(3);
cJonathan.x=1105;
cJonathan.y=910;

FadeIn(3);
cJonathan.Walk(1070, 960, eBlock);
Room3Piso=2;
}

function hPiano_Look()
{
  if(Room3Piso==1){
cJonathan.Walk(980, 1530, eBlock);
cJonathan.Think("Siempre me hubiera gustado aprender a tocar uno.");
cJonathan.Think("Creo que me acuerdo de alguna pieza…");
//Luigis mansion piano
}
}

function hEstanteria_Look()
{
  if(Room3Piso==1){
cJonathan.Walk(1250,  1500,  eBlock);
cJonathan.Think("Hmmm…");
cJonathan.Think("Este libro parece estar bien cuidado.\n“Kitab Al-Azif”");
cJonathan.Think("¿Eso?…¿Eso no es uno de los libros prohibidos?");
}
}

function region8_WalksOnto()
{
  if(EsqueletoAviso==false){
cCavi.Say("¡Eh tú ven aquí!");
EsqueletoAviso=true;
  }
}

function hCuadroDracula_Look()
{
  if(Room3Piso==1){
cJonathan.Walk(1600,  1500,  eBlock); 
cJonathan.Think("Es un retrato espeluznante...");
}
}


function hMarishka_UseInv()
{
  if(ObjUsadosMere<2){
if(player.ActiveInventory==iRosario){
  cMarishka.Say("¿Crees que nos harías algo con eso? Somos demasiado para ti muchacho");
  cJonathan.Think("¿Deberia usar otra cosa?");
  }
  else if(player.ActiveInventory==iAguaBendita1){
    cMarishka.Say("¡Gr... eso me quema bastante veo que quieres jugar!");
    ObjUsadosMere++;
    AguaBenditaUsada++;
    if(AguaBenditaUsada==2){
      cJonathan.LoseInventory(iAguaBendita1);
    }
  }
}
else if(player.ActiveInventory==iRosario){
  cMMMverona.Say("¡Hermanas se ha pasado de la raya no dejemos gota de sangre en ese varonil cuerpo!");
  EventoMereTerminado=true;
  }
}

function hAleera_UseInv()
{
  if(ObjUsadosMere<2){
if(player.ActiveInventory==iRosario){
  cAleera.Say("¿Crees que nos harías algo con eso? Somos demasiado para ti muchacho");
  cJonathan.Think("¿Deberia usar otra cosa?");
  }
  else if(player.ActiveInventory==iAguaBendita1){
    cAleera.Say("¡Humano inutil eso solo me sube la temperatura corporal!");
    ObjUsadosMere++;
    AguaBenditaUsada++;
    if(AguaBenditaUsada==2){
      cJonathan.LoseInventory(iAguaBendita1);
    }
  }
}
else if(player.ActiveInventory==iRosario){
  cMMMverona.Say("¡Hermanas se ha pasado de la raya no dejemos gota de sangre en ese varonil cuerpo!");
  EventoMereTerminado=true;
  }
}

function hVerona_UseInv()
{
if(ObjUsadosMere<2){
  if(player.ActiveInventory==iRosario){
  cMMMverona.Say("¿Crees que nos harías algo con eso? Somos demasiado para ti muchacho");
  cJonathan.Think("¿Deberia usar otra cosa?");
  }
  else if(player.ActiveInventory==iAguaBendita1){
    cMMMverona.Say("¡Crees que puedes quemarme, no podrás con las 3!");
    ObjUsadosMere++;
    AguaBenditaUsada++;
    if(AguaBenditaUsada==2){
      cJonathan.LoseInventory(iAguaBendita1);
    }
  }
}
else if(player.ActiveInventory==iRosario){
  cMMMverona.Say("¡Hermanas se ha pasado de la raya no dejemos gota de sangre en ese varonil cuerpo!");
  EventoMereTerminado=true;
}
}

function region10_Standing()
{
if(EventoMereTerminado==true){
  cConde.FaceDirection(eDirectionRight);
  cConde.Transparency=0;
  cConde.Say("YA CAYÓ LA NOOOOOCHE, LA NENA ME DIJO QUE NO TOSE ASI QUE LA PUSE A FUMAR");

  cJonathan.ChangeRoom(2, 1500, 1500, eDirectionLeft);
  }
}
