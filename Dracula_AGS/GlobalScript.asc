// main global script file

// called when the game starts, before the first room is loaded
function game_start()
{
  Noche=0;
  TimeSave=0;
  Game.SpeechFont = eFontFont4;
}

// called on every game cycle, except when the game is blocked
function repeatedly_execute()
{
  if(NocheGlobal){
    if(Noche==0){NocheEnRoom=true; NocheGlobal=false;}
    else if(Noche==1){NocheEnRoom=true; NocheGlobal=false;}
  }
  

}

// called on every game cycle, even when the game is blocked
function repeatedly_execute_always()
{
}

// called when a key is pressed
function on_key_press(eKeyCode keycode)
{
  if (IsGamePaused())
  {
    // game paused, so don't react to any keypresses
    keycode = 0;
  }
  else if (keycode == eKeyCtrlQ)
  {
    // Ctrl-Q will quit the game
    QuitGame(1);
  }
  else if (keycode == eKeyF9)
  {
    // F9 will restart the game
    RestartGame();
  }
  else if (keycode == eKeyF12)
  {
    // F12 will save a screenshot to the save game folder
    SaveScreenShot("screenshot.pcx");
  }
  else if (keycode == eKeyCtrlS)
  {
    // Ctrl-S will give the player all defined inventory items
    Debug(0, 0);
  }
  else if (keycode == eKeyCtrlV)
  {
    // Ctrl-V will show game engine version and build date
    Debug(1, 0);
  }
  else if (keycode == eKeyCtrlA)
  {
    // Ctrl-A will show walkable areas
    Debug(2, 0);
  }
  else if (keycode == eKeyCtrlX)
  {
    // Ctrl-X will let the player teleport to any room
    Debug(3, 0);
  }
  else if (keycode == eKey1)
  {
    NocheGlobal=true;
  }
  else if(keycode == eKey2){
    Acto=2;
    cJonathan.ChangeRoom(2);
    
  }
  else if(keycode == eKey3){
    Acto=3;
    cJonathan.ChangeRoom(2);
    
  }
  else if(keycode == eKey4){
    Acto=3;
    DialogoBiblioteca=true;
    cJonathan.ChangeRoom(2);
  }else if(keycode == eKey5){
    Acto=4;
    PuertaCerradaRoom3=true;
    cJonathan.AddInventory(iRosario);
    Noche=1;
    cJonathan.ChangeRoom(3, 1940,  1500, eDirectionLeft);
  }else if(keycode == eKey6){
    Acto=4;
    PuertaCerradaRoom3=true;
    cJonathan.AddInventory(iRosario); cJonathan.AddInventory(iAguaBendita1); HechoPuzzleRoom3=true;
    Noche=1;
    cJonathan.ChangeRoom(3, 1940,  1500, eDirectionLeft);
  }else if(keycode == eKey7){
    Acto=5;
    cJonathan.AddInventory(iRosario);
    cJonathan.ChangeRoom(2, 500, 1500, eDirectionLeft);
  }
}

// called when a mouse button is clicked
function on_mouse_click(MouseButton button)
{
  if (IsGamePaused())
  {
    // game is paused, so do nothing (i.e. don't process mouse clicks)
  }
  else if (button == eMouseLeft)
  {
    // left-click, so try using the current mouse cursor mode at this position
    Room.ProcessClick(mouse.x, mouse.y, mouse.Mode);
  }
  else if (button == eMouseRight)
  {
    // right-click, so cycle the mouse cursor mode
    mouse.SelectNextMode();
  }
}

function dialog_request(int param) {
}

function CambioAMirar(){
  
}



function Button4_OnClick(GUIControl *control, MouseButton button)
{
  gGui3.Visible=false;
  UnPauseGame();
}

function Button6_OnClick(GUIControl *control, MouseButton button)
{
gGui3.Visible=true;
PauseGame ();
}



function iAguaBendita1_Talk()
{
player.ActiveInventory = iAguaBendita1;
}
function iRosario_Talk()
{
player.ActiveInventory = iRosario;
}
function iLlave_Talk()
{
player.ActiveInventory = iLlave;
}
function iHoja1_Talk()
{
player.ActiveInventory = iHoja1;
}
function iHoja2_Talk()
{
player.ActiveInventory = iHoja2;
}
function iHoja3_Talk()
{
player.ActiveInventory = iHoja3;
}


function cCochero_Look()
{
player.Think("No parece hablar mi idioma");
}

function cCavi_Look()
{
player.Walk(890, 470, eBlock);
dCavi.Start();
}
