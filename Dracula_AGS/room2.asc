// room script file

function room_Load()
{
SetBackgroundFrame(Noche);
}
function room_AfterFadeIn()
{
SetTimer(1, 400-TimeSave);
SetTimer(2, 40);
if(Noche==0){
  cJonathan.Transparency=0;
  cJonathanNoche.Transparency=100;
}else{
  cJonathan.Transparency=100;
  cJonathanNoche.Transparency=0; 
}

}

function on_key_press(eKeyCode keycode)
{
if (IsTimerExpired(1))
  {
    if(Noche==0){SetFadeColor(80, 40, 1);}
    else{SetFadeColor (40, 70, 125);}
    FadeOut(10);
    
    if(Noche==0){Noche=1; SetBackgroundFrame(Noche);
    
    cJonathanNoche.x=cJonathan.x;
    cJonathanNoche.y=cJonathan.y;
    
    if(cJonathan.FaceDirection(eDirectionLeft)){
    cJonathanNoche.FaceDirection(eDirectionLeft);
    }else{
    cJonathanNoche.FaceDirection(eDirectionRight);  
    }
    
    cJonathan.Transparency=100;
    cJonathanNoche.Transparency=0; 
    
    cJonathanNoche.SetAsPlayer();
    }
    else if(Noche==1){Noche=0; SetBackgroundFrame(Noche);
    
    cJonathan.x=cJonathanNoche.x;
    cJonathan.y=cJonathanNoche.y;
    
    if(cJonathanNoche.FaceDirection(eDirectionLeft)){
    cJonathan.FaceDirection(eDirectionLeft);
    }else{
    cJonathan.FaceDirection(eDirectionRight);  
    }
    
    cJonathanNoche.Transparency=100;
    cJonathan.Transparency=0; 
    
    cJonathan.SetAsPlayer();
    }
    
    Wait(10);
    
    if(Noche==1){SetFadeColor(40, 70, 125);}
    else{SetFadeColor(80, 40, 1);}
  
    FadeIn(10);
  }

  if(IsTimerExpired(2)){
  TimeSave=TimeSave+40;
  SetTimer(2, 40);
  }

}



function room_RepExec()
{
    SetBackgroundFrame(Noche);

}

function hSubirAlPiso2_WalkOn()
{
 player.x = 1792;
  player.y = 750;
  cJonathan.Walk(1776, 848, eBlock);
  cJonathan.FaceDirection(eDirectionLeft, eBlock);
  Game.Camera.AutoTracking=true;
}
function hBajarAlPiso1_WalkOn(){
 player.x = 1800;
  player.y = 1200;
  cJonathan.Walk(1760, 1370, eBlock);
  cJonathan.FaceDirection(eDirectionLeft, eBlock);
  Game.Camera.AutoTracking=true; 
}

function h_PuertaJ_Look()
{
player.Walk(100, 1500, eBlock);
player.ChangeRoom(1, 3290, 495, eDirectionRight); 
}

