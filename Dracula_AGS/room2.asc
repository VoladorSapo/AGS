// room script file

function room_Load()
{
SetBackgroundFrame(Noche);
if(!IntroRoom2Hecha){
cConde.ChangeRoom(2, 810,  1420, eDirectionLeft);
cJonathan.x=560;
cJonathan.y=1425;
cJonathan.FaceDirection(eDirectionDownRight);
}
}
function room_AfterFadeIn()
{
if(!IntroRoom2Hecha){
  dIntroRoom2.Start();
  IntroRoom2Hecha=true;
}
}

function on_key_press(eKeyCode keycode)
{

}



function room_RepExec()
{
//Si desde el codigo global se ordena cambiar de fondo
if(NocheEnRoom){
  if(Noche==0){
  SetFadeColor(80, 40, 1);
  FadeOut(10);
  
  Noche=1;
  
  //Cambio de View
  cJonathan.ChangeView(1);
  
  SetBackgroundFrame(Noche);
  
  Wait(10);
  SetFadeColor (75, 45, 0);
  FadeIn(10);
  NocheEnRoom=false;
  
  cJonathan.Think("Parece que me he pasado toda la tarde escribiendo.");
  cJonathan.Think("Lo mejor será que me vaya a la cama.");
  
  }else if(Noche==1){
  SetFadeColor (75, 45, 0);
  FadeOut(10);
  
  Noche=0;
  
  //Cambio de View
  cJonathan.ChangeView(1);
  
  SetBackgroundFrame(Noche);
  
  Wait(10);
  SetFadeColor(80, 40, 1);
  FadeIn(10);
  NocheEnRoom=false;
  }

}

}

function hSubirAlPiso2_WalkOn()
{
 player.x = 1792;
  player.y = 750;
  cJonathan.Walk(1776, 848, eBlock);
  cJonathan.FaceDirection(eDirectionLeft, eBlock);
  Game.Camera.AutoTracking=true;
}
function hBajarAlPiso1_WalkOn(){
 player.x = 1800;
  player.y = 1200;
  cJonathan.Walk(1760, 1370, eBlock);
  cJonathan.FaceDirection(eDirectionLeft, eBlock);
  Game.Camera.AutoTracking=true; 
}

function h_PuertaJ_Look()
{
if(YaDormidoRoom2){  
player.Walk(100, 1500, eBlock);
player.ChangeRoom(1, 3290, 495, eDirectionRight);
}else{
cJonathan.Walk(100, 1500, eBlock);
cJonathan.Say("Estoy bastante canasdo del viaje,\nmejor no intento ni salir");
}
}


function room_FirstLoad()
{

}

function hMESA_Look()
{
cJonathan.Walk(340, 1450, eBlock);
cJonathan.Think("El señor Drácula se ha pasado,\nhay un montón de comida que se pondrá mala.");
cJonathan.Think("Pero como decían los siete sabios uno no acude al banquete\ndispuesto a ser llenado como un vaso vacío.");
}

function region1_WalksOnto()
{
cJonathan.Think("Creo que mañana debo afeitarme.");
}



function hEscritorioPegajoso_Look()
{
cJonathan.Walk(1260, 1415, eBlock);
if(!YaDormidoRoom2 && Noche==0){
  cJonathan.Think("Ya que estoy dejo mi diario, debería repasar lo que escribí.\nVamos, voy a cogerlo y así le hecho una ojeada.");
  //Play de un video escribiendo
  NocheGlobal=true;
  
}else if(!YaDormidoRoom2 && Noche==1){
  cJonathan.Think("No debería escribir de noche,\nes malo para la vista.");
  
}else if(YaDormidoRoom2){ 
  cJonathan.Think("¡Qué incómodo fue escribir sobre este escritorio!");
  cJonathan.Think("Está demasiado pegajoso.\n¿Me pregunto por qué será?");
}
}

function hCAMA_Look()
{
  cJonathan.Walk(1450, 1470, eBlock);
  if(!YaDormidoRoom2 && Noche==1){
  cJonathan.Think("La verdad es que estoy muy cansado.\nMe voy a acostar.");
  SetFadeColor(0, 0, 0);
  FadeOut(6);
  PlayVideo("zzz.ogv", eVideoSkipNotAllowed, 0);
  
  Noche=0;
  SetBackgroundFrame(Noche);
  SetFadeColor(80, 40, 1);
  FadeIn(6);
  
  
  YaDormidoRoom2=true;
  }else if(Noche==0){cJonathan.Think("Aún me quedan fuerzas para hacer algo más.");}
}

function hHotspot0_Look()
{
  
}