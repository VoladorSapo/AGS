// room script file



function room_AfterFadeIn()
{
  /*Game.Camera.AutoTracking=true;
  player.x = 2970;
  player.y = 1620;
  Game.Camera.AutoTracking=false;
  Game.Camera.X=2810;*/
//gGui2.Visible=true;
  }

function hHotspot1_Mode8()
{

}



function Door3_Interact()
{

}

function hSubirAlPiso2_WalkOn()
{
  player.x = 4400;
  player.y = 800;
  cJonathan.Walk(4400, 800, eBlock);
  cJonathan.FaceDirection(eDirectionLeft, eBlock);
  Game.Camera.AutoTracking=true;
  RemoveWalkableArea(4);
  RemoveWalkableArea(2);
  RestoreWalkableArea(3);
}

function hSubirAlPiso3_WalkOn()
{ 
cJonathan.Walk(2980,480, eBlock);
  player.x = 2970;
  player.y = 500;
  cJonathan.FaceDirection(eDirectionLeft,  eBlock);
  Game.Camera.Y=player.y-Game.Camera.Height/2;
  RemoveWalkableArea(3);
  RemoveWalkableArea(2);
  RestoreWalkableArea(4);
}

function pruebaObjAgua_Interact()
{
  cJonathan.AddInventory(iAguaBendita);
  cJonathan.AddInventory(iLlave);
  cJonathan.AddInventory(iHoja);
  cJonathan.AddInventory(iRosario);
}

function hPuertaEntrada_Interact()
{
  FueraPatio=false;
  player.Walk(2648, 1328,  eBlock);
  Game.Camera.AutoTracking=true;
  player.x = 2970;
  player.y = 1620;
  cJonathan.FaceDirection(eDirectionRight,  eBlock);
  Game.Camera.AutoTracking=false;
  Game.Camera.X=2810;
  RemoveWalkableArea(3);
  RemoveWalkableArea(4);
  RestoreWalkableArea(2);
}

function hPuertaCerrada_Interact()
{
cConde.x = 3220;
cConde.y = 1220;
cConde.Say("Lo ziento mucho pero esa parte del castillo ez peligrosa de noche.");
}

function room_Load()
{
  if(!Start){
  PlayVideo("INTRO.ogv", eVideoSkipEscKey , 1);
  Start = true;
  }
}
function room_RepExec()
{
int CamX2=Game.Camera.X + Game.Camera.Width;
int CamX1=Game.Camera.X;
int Jposx=cJonathan.x;

//Label1.Text = String.Format("%d", CamX2);

if(FueraPatio){
  if(Jposx>2165){
    Game.Camera.AutoTracking=false;
    while((Game.Camera.X+Game.Camera.Width)>2810){
      Game.Camera.X-=1;
    }
  }else if(Jposx<2165){
    Game.Camera.AutoTracking=true;
  }
}else{
  if(Jposx<(2810+Game.Camera.Width/2)){
    Game.Camera.AutoTracking=false;
    while((Game.Camera.X)<2810){
      Game.Camera.X=2810;
    }
  }else if(Jposx>(2810+Game.Camera.Width/2)){
    Game.Camera.AutoTracking=true;
  }
}


  }

function hPuertaAlPiso2_Interact()
{
  player.x = 3200;
  player.y = 800;
  cJonathan.Walk(3200, 800, eBlock);
  cJonathan.FaceDirection(eDirectionRight,  eBlock);
  Game.Camera.Y=player.y-Game.Camera.Height/2;
  RemoveWalkableArea(4);
  RemoveWalkableArea(2);
  RestoreWalkableArea(3);
}

function hBajarAlPiso1_WalkOn()
{
  player.x = 4385;
  player.y = 1215;
  RestoreWalkableArea(2);
  cJonathan.Walk(4385, 1215, eBlock);
  cJonathan.FaceDirection(eDirectionLeft,  eBlock);
  Game.Camera.Y=player.y+Game.Camera.Height/2;
  RemoveWalkableArea(3);
  RemoveWalkableArea(4);
  }

function hSalidaPatio_WalkOn()
{
  
  player.x = 2615;
  player.y = 1285;
  FueraPatio=true;
  
  
  cJonathan.FaceDirection(eDirectionLeft,  eBlock);
  Game.Camera.X=2810-Game.Camera.Width;
  Game.Camera.Y=player.y-Game.Camera.Height/2;
}

function hPuertaJ_Interact()
{
player.Walk(3290, 495, eBlock);
player.ChangeRoom(2, 100, 1500, eDirectionRight); 
}
